<!doctype html>
<html>
  <head>
    <title>Clear Cache - CrazyCube</title>
    <meta charset="utf-8" />
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 600px;
        margin: 50px auto;
        padding: 20px;
        background: #1a1a1a;
        color: #fff;
      }
      .btn {
        background: #0ea5e9;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        margin: 10px 5px;
        font-size: 16px;
      }
      .btn:hover {
        background: #0284c7;
      }
      .status {
        margin: 20px 0;
        padding: 10px;
        border-radius: 5px;
      }
      .success {
        background: #065f46;
        border: 1px solid #10b981;
      }
      .warning {
        background: #92400e;
        border: 1px solid #f59e0b;
      }
    </style>
  </head>
  <body>
    <h1>üßπ CrazyCube Cache Cleaner</h1>
    <p>–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –±—Ä–∞—É–∑–µ—Ä–∞ –¥–ª—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å–∞–π—Ç–∞:</p>

    <button class="btn" onclick="clearAll()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –í–°–Å</button>
    <button class="btn" onclick="clearStorage()">üì¶ LocalStorage</button>
    <button class="btn" onclick="clearWallet()">üëõ Wallet Data</button>
    <button class="btn" onclick="clearTokens()">ü™ô Token Cache</button>

    <div id="status"></div>

    <h3>–ß—Ç–æ –±—É–¥–µ—Ç –æ—á–∏—â–µ–Ω–æ:</h3>
    <ul>
      <li>LocalStorage (–±–∞–ª–∞–Ω—Å—ã, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏)</li>
      <li>SessionStorage (–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)</li>
      <li>Wallet Connection –¥–∞–Ω–Ω—ã–µ</li>
      <li>Token –∫–µ—à –∏ –±–∞–ª–∞–Ω—Å—ã</li>
      <li>NFT –¥–∞–Ω–Ω—ã–µ</li>
      <li>Web3Modal –∫–µ—à</li>
    </ul>

    <script>
      function showStatus(message, type = 'success') {
        const status = document.getElementById('status');
        status.innerHTML = `<div class="status ${type}">${message}</div>`;
        setTimeout(() => (status.innerHTML = ''), 3000);
      }

      function clearStorage() {
        try {
          localStorage.clear();
          sessionStorage.clear();
          showStatus('‚úÖ Storage –æ—á–∏—â–µ–Ω!');
        } catch (e) {
          showStatus('‚ùå –û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏ storage', 'warning');
        }
      }

      function clearWallet() {
        try {
          // Clear wallet-related data
          const walletKeys = Object.keys(localStorage).filter(
            key =>
              key.includes('wallet') ||
              key.includes('web3modal') ||
              key.includes('wagmi') ||
              key.includes('connector')
          );
          walletKeys.forEach(key => localStorage.removeItem(key));
          showStatus('‚úÖ Wallet –¥–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã!');
        } catch (e) {
          showStatus('‚ùå –û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏ wallet', 'warning');
        }
      }

      function clearTokens() {
        try {
          // Clear token and balance data
          const tokenKeys = Object.keys(localStorage).filter(
            key =>
              key.includes('token') ||
              key.includes('balance') ||
              key.includes('cra') ||
              key.includes('nft')
          );
          tokenKeys.forEach(key => localStorage.removeItem(key));
          showStatus('‚úÖ Token –∫–µ—à –æ—á–∏—â–µ–Ω!');
        } catch (e) {
          showStatus('‚ùå –û—à–∏–±–∫–∞ –æ—á–∏—Å—Ç–∫–∏ tokens', 'warning');
        }
      }

      function clearAll() {
        try {
          // Clear all storage
          localStorage.clear();
          sessionStorage.clear();

          // Clear IndexedDB if available
          if (window.indexedDB) {
            indexedDB.databases().then(databases => {
              databases.forEach(db => {
                indexedDB.deleteDatabase(db.name);
              });
            });
          }

          // Clear Cache API if available
          if ('caches' in window) {
            caches.keys().then(names => {
              names.forEach(name => {
                caches.delete(name);
              });
            });
          }

          showStatus('‚úÖ –í–°–Å –û–ß–ò–©–ï–ù–û! –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã...');
          setTimeout(() => {
            window.location.href = '/';
          }, 2000);
        } catch (e) {
          showStatus('‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏', 'warning');
        }
      }

      // Auto-clear on load if requested
      if (window.location.search.includes('auto=true')) {
        clearAll();
      }
    </script>
  </body>
</html>
